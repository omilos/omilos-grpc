// User wants to fetch certificates, and credits
syntax = "proto3";
package omilos_grpc;
option go_package = "gitlab.com/omilos/omilos-grpc";

//import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";

message CastsRequest {
    google.protobuf.StringValue fid = 1;
}

message CastsResponse {
    repeated Cast casts = 1;
}

message Cast {
    string hash = 1;
    string thread_hash = 2;
    string text = 3;
    uint64 timestamp = 4;
    uint64 replies = 5;
    uint64 reactions = 6;
    uint64 recasts = 7; // TODO
    uint64 watches = 8;
    bool recast = 9;
    ViewContext view_context = 10;
}

message ViewContext {
    bool reacted = 1;
    bool recasted = 2;
    bool watched = 3;
}

message Author {
    uint64 fid = 1;
    string username = 2;
    string display_name = 3;
    ProfilePicture pfp = 4;
    uint64 follower_count = 5;
    uint64 following_count = 6;
}

message ProfilePicture {
    string url = 1;
    bool verified = 2;
}


service Omilos {
    rpc Casts (CastsRequest) returns (stream CastsResponse) {}
}
